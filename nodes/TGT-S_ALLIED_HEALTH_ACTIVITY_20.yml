fileVersion: 1
id: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
name: S_ALLIED_HEALTH_ACTIVITY_20
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: "Get details of those activities where the description contains the word Priority. These are not activities as such but used to prioritise other activities for the same event/shift date/discipline/user combination."
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9d7f6d89-239f-459b-ae8e-7f2611330e3e
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(9)
        defaultValue: ""
        description: Id that uniquely identifies the encounter in Allied Health.
        name: ALLIED_HEALTH_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 3dbe5e49-8121-4b62-94cb-702e4715183b
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 84ea1600-aac4-4d2e-a53e-8c418c483dd3
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: Patient NHI number.
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5d0912cd-0134-4428-b53d-c9e70189906d
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1ab8cb40-af68-422e-b93f-794ea2b3b8f7
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: DATE
        defaultValue: ""
        description: Date when the Allied Health shift occurred.
        name: SHIFT_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5b28888a-fc52-4b48-be5e-5f12421c568b
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 209abdfb-5d59-4e4c-b1b9-9baf2c015c48
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(8)
        defaultValue: ""
        description: Alphanumeric value that uniquely identifies a discipline e.g. DTN (Dietitian)
        name: DISCIPLINE_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: a812bc1d-873f-4f92-bdf4-2e0c123c6a76
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8b26469d-9ede-4eb8-87ed-dfde5534a4bf
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(10)
        defaultValue: ""
        description: Alphanumeric code that uniquely identifies a user in Allied Health.
        name: USER_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 995c6174-28bd-4121-9e15-0dae93e18598
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3f6844b0-1045-4301-a15d-9a0157880ca9
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(8)
        defaultValue: ""
        description: Alphanumeric code that, together with activity_revision, uniquely identifies an activity in Allied Health.
        name: ACTIVITY_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 48325998-db70-4486-99d1-c0e04dc06df8
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 032a4d57-bcbe-4376-861a-71748cce4872
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(60)
        defaultValue: ""
        description: Description of the activity e.g. Family meeting.
        name: ACTIVITY_DESC
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e801f760-0730-4f9b-92f5-53890c2ae1fc
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: df62977d-5360-449c-850c-592884adbcfe
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: NUMERIC(9,5)
        defaultValue: ""
        description: Actual activity time on the shift in hours e.g. 1.25 = 75 minutes.
        name: ACTUAL_ACTIVITY_HOURS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7a44bd44-ad88-4031-bb49-f9e1dedbe57d
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5196395e-2023-4fea-b0f2-1458516109f4
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: VARCHAR(1)
        defaultValue: ""
        description: Value extracted from the activity description when that field contains the word 'Priority'. Range currently used is 1-4.
        name: ACTIVITY_PRIORITY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2b69a6cb-fc63-4d5c-bf31-fe27dd3d4f02
                stepCounter: db4588de-fb3d-4698-b5c4-abb8fc2424cc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 4fd6ecc9-159b-4017-afd9-271aae7a4ba4
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Numbers rows by allied_health_id, shift_date, discipline_code, user_code so that duplicated rows can be ignored.
        name: ROW_NUM
        nullable: false
        sourceColumnReferences:
          - columnReferences: []
            transform: ROW_NUMBER() OVER(PARTITION BY allied_health_id, shift_date, discipline_code, user_code ORDER BY activity_priority)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c6ff636b-fd3e-4e27-bab8-b8104bb17126
          stepCounter: 1b4d59d7-adff-4a49-8071-1f23e741fc5d
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_ALLIED_HEALTH_ACTIVITY_10
        join:
          joinCondition: |-
            FROM s_allied_health_activity_10
             WHERE activity_priority IS NOT NULL
        name: S_ALLIED_HEALTH_ACTIVITY_20
        noLinkRefs: []
  name: S_ALLIED_HEALTH_ACTIVITY_20
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
