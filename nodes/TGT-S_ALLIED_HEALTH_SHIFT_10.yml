fileVersion: 1
id: 6fe6b433-af00-4e14-84f6-9cd727ba5634
name: S_ALLIED_HEALTH_SHIFT_10
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: "Get details of all shifts from TrendCare load tables."
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: db227c5e-c1c5-4d82-bcca-8ad878086fde
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: VARCHAR(9)
        defaultValue: ""
        description: Id that uniquely identifies the encounter in Allied Health.
        name: ALLIED_HEALTH_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f2c236c5-a318-4693-8f9c-1f992938f654
                stepCounter: 87df5a4f-d5d5-47f9-bd8c-1a1e85133acc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: b3458d34-4848-44ae-a07a-e07b3ef968a7
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: VARCHAR(12)
        defaultValue: ""
        description: Unique business identifier for inpatient event.
        name: EVENT_ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b62c9526-ac21-4fc3-b102-da150d7fb070
                stepCounter: 87df5a4f-d5d5-47f9-bd8c-1a1e85133acc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0fca3686-231a-4ec1-bed1-e2ba9c8e5c92
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: Patient NHI number.
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9c7ace5d-297d-4714-b0d8-531430ae4ba9
                stepCounter: 87df5a4f-d5d5-47f9-bd8c-1a1e85133acc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ab1b2f97-0368-4a87-a7a8-78a0f786bc39
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: 'Internal unique identifier for a patient from the Patient Management System '
        name: PATIENT_REFERENCE_NO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 57f1e950-8714-470f-b8b6-f0795239650b
                stepCounter: 87df5a4f-d5d5-47f9-bd8c-1a1e85133acc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 6ecee2a4-e6d9-4f4e-8a9b-d50ee46c31c5
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: PiMS ward code.
        name: DISCHARGE_WARD_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 68ffec0c-081c-4f7c-8309-ff750880cd45
                stepCounter: 87df5a4f-d5d5-47f9-bd8c-1a1e85133acc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8e9bee18-ca59-4005-94ac-5a281668e5f2
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: Service_Point_Reference_Number
        name: WARD_REFERENCE_NO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 513e9099-d47c-4528-8b67-705c5b48f0b2
                stepCounter: 87df5a4f-d5d5-47f9-bd8c-1a1e85133acc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d50d4134-4dbb-45e3-a98f-9763f3454e34
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: DATE
        defaultValue: ""
        description: Date when the Allied Health shift occurred.
        name: SHIFT_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2bc69cc3-62b6-4dd3-9cd5-82c3521e0af9
                stepCounter: 60e660b1-3102-4da0-85b6-689f1ea4345b
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 91445b66-1627-4959-9267-9e87221d9060
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: VARCHAR(8)
        defaultValue: ""
        description: Alphanumeric value that uniquely identifies a discipline e.g. DTN (Dietitian)
        name: DISCIPLINE_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 20885eb8-647f-4ceb-b190-49938d185a3f
                stepCounter: 60e660b1-3102-4da0-85b6-689f1ea4345b
            transform: RTRIM(l_tcare_PatientHealthCare_ShiftDate.phcdDisciplineCode)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c2858cfd-3b03-4422-ade8-680486e1d5a6
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: VARCHAR(10)
        defaultValue: ""
        description: Alphanumeric code that uniquely identifies a user in Allied Health.
        name: USER_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7fb98c32-0192-4002-b9f3-edaaf3135481
                stepCounter: 60e660b1-3102-4da0-85b6-689f1ea4345b
            transform: RTRIM(l_tcare_PatientHealthCare_ShiftDate.phcdLastChangeSignonCode)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c72ef8fa-38c6-444e-966c-4459e2581286
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: NUMERIC(9,5)
        defaultValue: ""
        description: Shift time spent on the activity expressed in hours e.g. 1.25 = 85 minutes
        name: ACTUAL_SHIFT_HOURS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 50cf6e77-3eaa-4a1f-8f2e-1de3124b7e59
                stepCounter: 60e660b1-3102-4da0-85b6-689f1ea4345b
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7b18fcfe-201d-4706-9d29-e7e40d493138
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Shift hours time converted to minutes e.g. 1.25 hours = 85 minutes
        name: ACTUAL_SHIFT_MINS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 50cf6e77-3eaa-4a1f-8f2e-1de3124b7e59
                stepCounter: 60e660b1-3102-4da0-85b6-689f1ea4345b
            transform: ROUND(l_tcare_PatientHealthCare_ShiftDate.phcdActualActivityTime * 60, 0)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a91ccc0d-9e6c-4d34-ad3c-e8b19df2414e
          stepCounter: 6fe6b433-af00-4e14-84f6-9cd727ba5634
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_ALLIED_HEALTH_ENCOUNTER
        join:
          joinCondition: |-
            FROM s_allied_health_encounter
              JOIN l_tcare_PatientHealthCare_ShiftDate
                ON s_allied_health_encounter.allied_health_id = l_tcare_PatientHealthCare_ShiftDate.phcdPatientReference
             WHERE l_tcare_PatientHealthCare_ShiftDate.phcdActualActivityTime <> 0
        name: S_ALLIED_HEALTH_SHIFT_10
        noLinkRefs: []
  name: S_ALLIED_HEALTH_SHIFT_10
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
