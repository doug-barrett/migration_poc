fileVersion: 1
id: f3c11b68-bf32-4d5c-89b0-1e0c96686255
name: S_EVITALS_OBSERVATION_SET_20
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: "Calculate Early Warning Score (EWS) columns."
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1fafacca-5314-4d97-a146-bc0c1b9a7027
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: REFERENCE_VALUE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 4279ee18-7d88-44b8-8d0c-d1ea9ca5e960
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 897b7d85-3d69-4e21-9ab9-5511eddfcc5f
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: ADMISSION_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 70ada7f2-b256-40cf-a33c-f58bfdd890a6
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 375867e9-c7a7-4c70-a880-8dd11b0b9f90
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Integer ID that uniquely identifies an observation set in Patientrack. Sourced from obset_pk.
        name: OBSERVATION_SET_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 61786e33-bc99-4a9e-b74e-04941148a84b
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3ecf7b8d-b286-43d7-9cf8-1795e8e00101
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time when the observation measure started.
        name: OBSERVATION_START_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 08c7c712-0f09-418c-95f3-6e9b9fb16e4e
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3abd9b3b-aaaf-442d-b112-7cf3e4229368
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: 'UTC Date and time when the observation measure was taken. '
        name: OBSERVATION_TAKEN_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f22b8909-f72b-4568-87cd-c08b6a96b5d8
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8f0ee41b-2179-4a49-afc2-772dbe65a5c3
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: ""
        name: NOT_TAKEN_REASON_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8a8676ee-be01-49ed-a422-8c1d7dcadfb4
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1ea93186-985a-4ef2-9f4d-7f385496f7bb
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Integer ID that uniquely identifies a measure set in Patientrack. Sourced from msset_pk.
        name: MEASURE_SET_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c0184daf-ef70-4e9e-8e84-da649d99cbc3
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 624c56bb-1332-401e-a7e4-a7e3fab2dd00
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: PAIN_AT_REST_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 33fd1af7-e7bb-450c-812e-d1cbef916097
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c818c4b2-ad15-47c7-a480-fe969ed875ba
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: EWS_PROFILE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2d26c59f-5cc6-4ef6-8e10-6d6855b5f80e
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3b693bf7-8891-436c-aaa9-fe94a1449b6f
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: regime key
        name: EWSRG_PK
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 05a0c360-4048-4b5a-adce-5f977862a862
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3aca8c61-0c59-433b-a52b-f453ff6ede03
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Parent regime
        name: PARENT_EWSRG_PK
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7f979bad-bee2-43e2-8059-8f83ccfe2d5b
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: da8c000a-c25c-4568-ae2e-94b7a720d94d
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: NUMERIC(8,2)
        defaultValue: ""
        description: Result of the Temperature measure for the observation set.
        name: TEMPERATURE_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 586efebf-f242-4329-889f-00c62021be0e
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7ac3bc8a-09e0-4ad0-80d7-1e84497a358b
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Result of the Lying Systolic Blood Pressure measure for the observation set.
        name: SBP_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 29c5f248-d46c-4b6f-863f-37903ce9749d
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: coalesce(ds_eVitals_observation_set_10.sbp_result ,ds_eVitals_observation_set_10.sbp_result_nz)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 40530efa-56b6-400c-91ff-cb770f93fa54
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: PAIN_AT_MOVEMENT_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 37c8df4e-2105-4c75-b086-bc6e443575d5
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 13801bfc-9966-4d01-b13f-094b9b4ba792
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Result of the Heart Rate measure for the observation set.
        name: HR_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: df0fc9e8-bc67-4fea-ae17-d863bb31797f
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: coalesce(ds_eVitals_observation_set_10.HR_result ,ds_eVitals_observation_set_10.HR_result_nz)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5069abdc-e110-4984-8be0-709be4f670a5
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Result of the Respiration Rate measure for the observation set.
        name: RESPR_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 05d19fc1-4be3-4c8f-b3bf-05bb003d9087
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: coalesce(ds_eVitals_observation_set_10.respr_result ,ds_eVitals_observation_set_10.respr_result_nz)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a99fb543-393b-4662-bb58-b52669a81c7f
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: VARCHAR(50)
        defaultValue: ""
        description: ""
        name: COLOUR_ZONE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5707616b-00fc-4c05-b58e-ad1617b80b5c
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9bc9d751-bbf1-417d-a41f-4d35a7992c33
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: Result of the Oxygen Saturation measure for the observation set.
        name: O2SAT_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: cf34819a-14bc-4d46-a6c0-252b80fff7fe
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: coalesce(ds_eVitals_observation_set_10.O2Sat_result ,ds_eVitals_observation_set_10.O2Sat_result_nz)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: dbc30195-5a45-4806-aad6-1fed4f44a1c7
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: NUMERIC(8,2)
        defaultValue: ""
        description: Result of the O2 Flow Rate measure for the observation set.
        name: O2FLOW_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8d596e95-b1ca-4925-b8de-c5b679ca799a
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: coalesce(ds_eVitals_observation_set_10.O2flow_result ,ds_eVitals_observation_set_10.O2flow_result_nz)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d46e96bc-508e-4e2d-8010-daf98b97599f
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: VARCHAR(255)
        defaultValue: ""
        description: Result of the O2 Flow Rate measure for the observation set.
        name: CNS_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 50a1dd8d-2741-45d1-8814-830cdb558515
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: b0e299e4-2df2-4961-b94a-577984b9cbb7
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: VARCHAR(10)
        defaultValue: ""
        description: ""
        name: DBP_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6bf9f7ce-e7e8-44ef-8d1c-d0113b575f40
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 93821828-2bfe-49e3-be92-fc3a1b2d0dc7
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: VARCHAR(255)
        defaultValue: ""
        description: Result of the O2 Flow Rate measure for the observation set.
        name: URINE_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ef7bc5d9-9493-4218-8f8d-60bbf8611625
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: coalesce(ds_eVitals_observation_set_10.urine_result ,ds_eVitals_observation_set_10.urine_result_nz)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 625a5d2a-4589-49b8-8d40-6f19106698f5
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: VARCHAR(255)
        defaultValue: ""
        description: ""
        name: PV_BLEEDING_RESULT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 08d7e191-4ecd-45e2-8d71-d0439d00d389
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c23b0b38-e34c-48d0-99da-cf856abc2f04
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Sepsis score when judged against high risk criteria.
        name: SEPSIS_RISK_SCORE_HIGH
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 586efebf-f242-4329-889f-00c62021be0e
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN CNS_result IN ('Responds to Pain','Responds to Voice', 'Unresponsive') THEN 1
                          ELSE 0
                           END + CASE WHEN SBP_result <= 90 THEN 1
                          ELSE 0
                           END + CASE WHEN respr_result >= 22 THEN 1
                          ELSE 0
                           END + CASE WHEN HR_result > 130 THEN 1
                          ELSE 0
                           END + CASE WHEN urine_result = 'Less than 10ml/hr' THEN 1
                          ELSE 0
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 790964a3-c5fb-4600-b1e1-7ec58901472c
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Sepsis score when judged against moderate risk criteria.
        name: SEPSIS_RISK_SCORE_MOD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 586efebf-f242-4329-889f-00c62021be0e
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN CNS_result = 'New confusion/agitation' THEN 1
                          ELSE 0
                           END + CASE WHEN urine_result = 'Less than 30ml/hr' THEN 1
                          ELSE 0
                           END + CASE WHEN SBP_result BETWEEN 91 AND 100 THEN 1
                          ELSE 0
                           END + CASE WHEN HR_result BETWEEN 100 AND 130 THEN 1
                          ELSE 0
                           END + CASE WHEN temperature_result < 36 THEN 1
                          ELSE 0
                           END + CASE WHEN temperature_result > 38 THEN 1
                          ELSE 0
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 24c26e27-41bd-4796-b93d-a5af86c1ac99
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the Temperature measure of the observation set.
        name: TEMPERATURE_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 586efebf-f242-4329-889f-00c62021be0e
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN ds_eVitals_observation_set_10.temperature_ews_nz IS NOT NULL THEN ds_eVitals_observation_set_10.temperature_ews_nz
                          ELSE ds_eVitals_observation_set_10.temperature_ews
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 601adc6b-c7d5-4f09-b5af-1ee87eb841ef
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the Lying Systolic Blood Pressure measure of the observation set.
        name: SBP_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 29c5f248-d46c-4b6f-863f-37903ce9749d
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN SBP_result_NZ IS NOT NULL AND ds_evitals_observation_set_10.parent_ewsrg_pk<>13173 OR SBP_result_NZ IS NOT NULL AND ds_evitals_observation_set_10.ewsrg_pk<>13173 THEN SBP_result_NZ -- Calculations below pre NZ EWS when not calcualted in the database

                          WHEN ds_evitals_observation_set_10.parent_ewsrg_pk<>13173 OR ds_evitals_observation_set_10.ewsrg_pk <>13173 AND SBP_result <= 90                                       THEN 3
                          WHEN ds_evitals_observation_set_10.parent_ewsrg_pk<>13173 OR ds_evitals_observation_set_10.ewsrg_pk <>13173 AND SBP_result BETWEEN 91 AND 100                          THEN 1
                          WHEN ds_evitals_observation_set_10.parent_ewsrg_pk<>13173 OR ds_evitals_observation_set_10.ewsrg_pk <>13173 AND SBP_result BETWEEN 101 AND 199                         THEN 0
                          WHEN ds_evitals_observation_set_10.parent_ewsrg_pk<>13173 OR ds_evitals_observation_set_10.ewsrg_pk <>13173 AND SBP_result >= 200                                      THEN 2
                          WHEN ds_evitals_observation_set_10.parent_ewsrg_pk=13173 OR ds_evitals_observation_set_10.ewsrg_pk=13173                                                               THEN ds_evitals_observation_set_10.SBP_ews
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c712778f-4c0a-4fa9-b78c-657274db4a89
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the Heart Rate measure of the observation set.
        name: HR_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: df0fc9e8-bc67-4fea-ae17-d863bb31797f
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN HR_result_NZ IS NOT NULL      THEN HR_result_NZ -- Calculations below pre NZ EWS when not calcualted in the database

                          WHEN HR_result <= 40               THEN 3
                          WHEN HR_result BETWEEN 41 AND 49   THEN 1
                          WHEN HR_result BETWEEN 50 AND 99   THEN 0
                          WHEN HR_result BETWEEN 100 AND 129 THEN 1
                          WHEN HR_result >= 130              THEN 3
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e3b6a3a1-46c4-4cb8-9806-361edc360d02
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: INT
        defaultValue: ""
        description: EWS for the Lying Diastolic Blood Pressure measure of the observation set.
        name: DBP_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: a6c41dcf-edd3-4300-9c41-0bfda1d9c37d
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 4b17be1e-6883-4805-9fd0-2384e40a4a8b
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the Respiration Rate measure of the observation set.
        name: RESPR_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 05d19fc1-4be3-4c8f-b3bf-05bb003d9087
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN respr_result_NZ IS NOT NULL    THEN respr_result_NZ -- Calculations below pre NZ EWS when not calcualted in the database

                          WHEN respr_result <= 8              THEN 3
                          WHEN respr_result BETWEEN 9 AND 18  THEN 0
                          WHEN respr_result BETWEEN 19 AND 24 THEN 1
                          WHEN respr_result BETWEEN 25 AND 29 THEN 2
                          WHEN respr_result >= 30             THEN 3
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7bac5555-3be4-4aa9-a348-fa0fde843913
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: RETROSPECTIVE_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: cf8004e8-0432-45f7-abf4-c03cdcec79d3
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0c94551a-8fc5-4a8f-9924-95d38ad5f4eb
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the Oxygen Saturation measure of the observation set.
        name: O2SAT_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: cf34819a-14bc-4d46-a6c0-252b80fff7fe
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN O2sat_result_NZ IS NOT NULL THEN O2sat_result_NZ -- Calculations below pre NZ EWS when not calcualted in the database

                          WHEN O2sat_result < 90           THEN 3
                          WHEN O2sat_result = 40           THEN 1
                          WHEN O2sat_result = 50           THEN 2
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 774d88f7-3cb1-41ca-91ac-95c16a89f755
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: PARTIAL_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 679bc611-09df-4b1e-b436-9eef8907e5f6
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a43694bf-ac64-41f9-8bc0-f29884bbb7f4
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the O2 Flow Rate measure of the observation set.
        name: O2FLOW_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8d596e95-b1ca-4925-b8de-c5b679ca799a
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN O2flow_result_NZ IS NOT NULL THEN O2flow_result_NZ -- Calculations below pre NZ EWS when not calcualted in the database

                          WHEN O2flow_result >= 15          THEN 3
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7e3990a9-9118-4d00-ad6a-d82511333478
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: CNS (Central Nervous System) EWS for the observation set.
        name: CNS_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 50a1dd8d-2741-45d1-8814-830cdb558515
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN CNS_result_NZ IS NOT NULL              THEN CNS_result_NZ -- Calculations below pre NZ EWS when not calcualted in the database

                          WHEN CNS_result = 'Alert'                   THEN 0
                          WHEN CNS_result = 'New confusion/agitation' THEN 1
                          WHEN CNS_result = 'Responds to Voice'       THEN 1
                          WHEN CNS_result = 'Responds to Pain'        THEN 2
                          WHEN CNS_result = 'Unresponsive'            THEN 3
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8b500084-2eaa-4f7c-8f39-05de1668e83c
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: EWS for the Urine Output measure of the observation set.
        name: URINE_EWS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ef7bc5d9-9493-4218-8f8d-60bbf8611625
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: |-
              CASE WHEN urine_result = 'More than 30ml/hr' THEN 0
                          WHEN urine_result = 'Less than 30ml/hr' THEN 1
                          WHEN urine_result = 'Less than 10ml/hr' THEN 3
                          ELSE NULL
                           END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ffaed46e-f075-4e0d-9cca-aa3333c86499
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Temperature result contributes to the EWS of the observation set.
        name: TEMPERATURE_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9b4a562c-afbc-4c6d-bd84-512c6c023468
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9adbe846-448e-4089-868c-da9fa453771a
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: OUT_OF_SEQ_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b3aecbb2-f899-4217-bc83-ecd2584b6433
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 98bbda6c-95fe-4259-8535-6ae7bed6c368
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Lying Systolic Blood Pressure result contributes to the EWS of the observation set.
        name: SBP_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8c054877-e515-4242-a280-8be1e53994ca
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5336aac3-c59b-4539-91f3-3908bb586060
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Lying Diastolic Blood Pressure result contributes to the EWS of the observation set.
        name: DBP_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f4058359-c8f2-4a23-be0e-7d24e21e0566
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 04220586-76aa-4acf-9fd6-09a468ee0797
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Heart Rate result contributes to the EWS of the observation set.
        name: HR_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 703f9cac-ee4d-4dbd-aaa6-9662680f377f
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 6936d630-1364-4e5f-a045-c4ac71b36b30
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Respiration Rate result contributes to the EWS of the observation set.
        name: RESPR_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2d6eec63-1af0-45da-b620-3b1ff154e5a7
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a5d8bbd1-c268-4dd6-9a18-4d9e69b0fcba
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Oxygen Saturation result contributes to the EWS of the observation set.
        name: O2SAT_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2de961ff-bb0d-4a57-aa0a-2fe9b6ff93c1
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: bd601c10-79ee-427f-8c7a-97338018021f
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the O2 Flow Rate result contributes to the EWS of the observation set.
        name: O2FLOW_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: cf815e8f-cd6c-4de8-9917-ca8347652c40
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a16389a8-ff62-44ff-867c-9bfd51b2a1f6
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the CNS result contributes to the EWS of the observation set.
        name: CNS_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9123089b-3c37-47bc-8e58-ad0f0af3fdea
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 40cc785f-84dd-4c59-b50e-d0980197baee
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the Urine Output result contributes to the EWS of the observation set.
        name: URINE_EWS_CONTRIBUTOR
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6759119e-64c2-4ead-ab9f-acf69e7d925b
                stepCounter: 2c916b57-7a0c-484f-8acf-06895bffc5b1
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 79732448-f373-4f24-9feb-2376255a8c42
          stepCounter: f3c11b68-bf32-4d5c-89b0-1e0c96686255
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: DS_EVITALS_OBSERVATION_SET_10
        join:
          joinCondition: FROM ds_eVitals_observation_set_10
        name: S_EVITALS_OBSERVATION_SET_20
        noLinkRefs: []
  name: S_EVITALS_OBSERVATION_SET_20
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
