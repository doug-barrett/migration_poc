fileVersion: 1
id: 17800dce-ce48-4da6-94b8-550ed58c38e5
name: S_EVITALS_ADMISSION_FLAG_10
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: "Get details of all the admission flags set. One row for each flag set. One admission ID can have many flags.  Custom proc populates first_note and last_note from admission_note."
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f8669752-860d-47d8-ae0b-57f7ef153010
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: ADMISSION_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 3f68edb3-1e8d-48b7-8850-2400c40ab4f7
                stepCounter: 6866bc35-1164-43e9-9ff9-15b44d426855
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: cc9c6a50-8787-4e6f-8077-ef48d067abd4
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: PATNT_PK
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9265a7bd-068b-45bc-8022-0c3f73e40a8f
                stepCounter: a8e499ca-300b-48a9-9045-922a42433271
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 62172925-fa30-4783-9d2f-67e98b66aefe
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: Patient NHI number.
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e31b1246-4b2b-4282-8f8f-b1731a705e9e
                stepCounter: 14a9733a-2051-4c6b-b9eb-02e1561188ee
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ef94cd12-c916-4cf8-85e9-b6b6d936fe20
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: ADMISSION_FLAG_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c9f22f70-1a61-4362-89ec-a2ec1432c3fb
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 12a4b7aa-292f-41f5-930c-3aed0af6a7c0
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: FLAG_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 72ef3efa-b4ad-4688-94ce-0e019fd9c58f
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3a121ce8-6f1b-4919-8c09-3fa4799b6bb8
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: CHAR(5)
        defaultValue: ""
        description: ""
        name: FLAG_DOMAIN
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 22b84e99-73b7-49e8-b467-e51ad072c7b0
                stepCounter: f6f252ab-0278-492b-8f5a-bc508fa6a440
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c3ca939d-4c01-41d8-9275-e02649f82a27
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: ""
        name: FLAG_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 731f06d9-48f9-440a-b739-65c7ba0bb438
                stepCounter: f6f252ab-0278-492b-8f5a-bc508fa6a440
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1d0faf72-c660-41fc-a24b-5b77e69ff0b8
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(255)
        defaultValue: ""
        description: ""
        name: FLAG_DESC
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: a1e6af49-d8c4-43cb-abf0-32e02215f095
                stepCounter: f6f252ab-0278-492b-8f5a-bc508fa6a440
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3211632e-8ff1-4f40-87da-f5f24a050833
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: FLAG_START_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: a9d3b236-d1cc-466e-85ad-31968768f5a2
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: dbo.fn_convert_utc_datetime2(ds_Patientrack_EPISODE_FLAG.START_DTTM)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: aa66ee29-c85a-404f-9f61-5ba19506f816
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: FLAG_END_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c6210d94-38be-4747-853a-fdaddab33d5f
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: dbo.fn_convert_utc_datetime2(ds_Patientrack_EPISODE_FLAG.END_DTTM)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 87482b7a-7a11-407e-b627-972f47e2dce2
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(MAX)
        defaultValue: ""
        description: The original trimmed value for source column NOTE.
        name: ADMISSION_NOTE_ORIG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f434d330-e8a1-4622-af32-df7246f03b07
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: LTRIM(RTRIM(CONVERT(varchar(MAX), ds_Patientrack_EPISODE_FLAG.NOTE)))
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3fad2a0d-4305-4208-9ae1-4f8a4652cba2
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(MAX)
        defaultValue: ""
        description: ""
        name: ADMISSION_NOTE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f434d330-e8a1-4622-af32-df7246f03b07
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: 'NULL'
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1c6723fa-69ef-4b2a-8cb8-d0572141f282
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(200)
        defaultValue: ""
        description: Part of the admission note prior to the first pipe character.
        name: FIRST_NOTE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f434d330-e8a1-4622-af32-df7246f03b07
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: 'NULL'
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 465c2e5c-744a-4259-a3f6-3c33d78bfce9
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: VARCHAR(200)
        defaultValue: ""
        description: Part of the admission note after the last pipe character. Will be null if no pipes found.
        name: LAST_NOTE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f434d330-e8a1-4622-af32-df7246f03b07
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: 'NULL'
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 97e451b0-9969-4290-a901-06f909699ae4
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: CREATED_USER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5508737c-c6ba-47c6-a7c1-bb1ada51625b
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5e50026e-ef84-47d6-b164-3e9739d434da
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: FLAG_CREATED_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2a1b47d5-b30c-47c0-802b-3b4300b179dc
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: dbo.fn_convert_utc_datetime2(ds_Patientrack_EPISODE_FLAG.CREATED_DTTM)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7363ac46-49fe-4acf-911b-9b0fca24ec96
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: MODIFIED_USER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 70339dfc-8a40-4072-85bc-619552712512
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d722e156-e8eb-4563-9765-f8c43af719f6
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: FLAG_MODFIED_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f116ec54-9400-456c-adbe-ebf1c28a01e4
                stepCounter: f9abd93e-7a73-421b-b4dd-57ef8a4d0f29
            transform: dbo.fn_convert_utc_datetime2(ds_Patientrack_EPISODE_FLAG.LAST_MODIFIED_DTTM)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 40936658-0dd0-4c9a-a341-2f8e93ac12f9
          stepCounter: 17800dce-ce48-4da6-94b8-550ed58c38e5
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_EVITALS_ADMISSION_CHANGES
        join:
          joinCondition: |-
            FROM s_eVitals_admission_changes
              JOIN ds_Patientrack_EPISODE
                ON s_eVitals_admission_changes.admission_id = ds_Patientrack_EPISODE.epsde_pk
              JOIN s_eVitals_patient
                ON ds_Patientrack_EPISODE.patnt_pk = s_eVitals_patient.patnt_pk
              JOIN ds_Patientrack_episode_FLAG
                ON ds_Patientrack_EPISODE.epsde_pk = ds_Patientrack_episode_FLAG.epsde_pk
              LEFT OUTER JOIN l_Patientrack_REFERENCE_VALUE
                ON ds_Patientrack_episode_FLAG.PFLAG_RFVAL = l_Patientrack_REFERENCE_VALUE.RFVAL_PK
        name: S_EVITALS_ADMISSION_FLAG_10
        noLinkRefs: []
  name: S_EVITALS_ADMISSION_FLAG_10
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
