fileVersion: 1
id: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
name: AGGOPSALESANDREVENUEBYCONTRACT
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: "Contains only UC Campus sales records only."
  isMultisource: false
  locationName: REPORTS
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9f595bc1-b93a-44ca-bc07-63b89e6d80fb
          stepCounter: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: AggOPSalesAndRevenueByContract.ContractId=Contract.ContractId
        hashDetails:
          hashAlgorithm: MD5
        hashedColumns:
          - column: "NULL"
        name: CONTRACTKEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ab82636d-0720-4267-a034-165253e8c1c8
                stepCounter: 79e76231-b280-4362-a8fa-68215a84f788
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 60442d0a-b7d0-4a1f-a259-a0aae147b0be
          stepCounter: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
        config: {}
        dataType: INT
        defaultValue: ""
        description: StageSalesMerge_AddKeys.TransactionDate=DimTransactionDate.TransactionDate
        hashDetails:
          hashAlgorithm: MD5
        hashedColumns:
          - column: "NULL"
        name: TRANSACTIONDATEKEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b661394f-ba25-485d-a363-30d04ae0eb24
                stepCounter: 79e76231-b280-4362-a8fa-68215a84f788
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: cc3dd03a-dbf8-4f95-bae4-de691c187817
          stepCounter: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
        config: {}
        dataType: VARCHAR
        defaultValue: ""
        description: ""
        hashDetails:
          hashAlgorithm: MD5
        hashedColumns:
          - column: "NULL"
        name: CONTRACTID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c2d00818-99e6-4971-8255-693660a1bb28
                stepCounter: 79e76231-b280-4362-a8fa-68215a84f788
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c7b8037f-ccb1-4e93-b552-e09c6caddd77
          stepCounter: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: StageUCSpendReportingLineItems_AddKeys.Campus=UCCampus.UCCampus
        hashDetails:
          hashAlgorithm: MD5
        hashedColumns:
          - column: "NULL"
        name: UCCAMPUSKEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 176e8461-009b-481a-8790-852674440d8b
                stepCounter: ff8e6c8c-a21d-4105-b135-1e58792d1cdf
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 27a44163-db82-4a8c-8d4d-40beb2da7602
          stepCounter: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
        config: {}
        dataType: NUMERIC(18,4)
        defaultValue: ""
        description: is the sales amount, or gross transaction volume (GTV), associated with a transaction in US Dollars. A Sales amount is typically NOT an individual sale, but a monthly aggregate of all sales for a customer in a given month.
        hashDetails:
          hashAlgorithm: MD5
        hashedColumns:
          - column: "NULL"
        name: SALES
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f4a71e14-54d2-4ee3-88da-c8c95b56c2c7
                stepCounter: 79e76231-b280-4362-a8fa-68215a84f788
            transform: SUM(SalesAndRevenue.Sales)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 071d5f8d-67ee-419c-8f60-43e5cf894e92
          stepCounter: d0ffe2bd-031b-4c6c-a2f7-96b873562a02
        config: {}
        dataType: NUMERIC(18,4)
        defaultValue: ""
        description: is the amount of gross revenue, always in US Dollars, OMNIA Partners recieved for the row.
        hashDetails:
          hashAlgorithm: MD5
        hashedColumns:
          - column: "NULL"
        name: REVENUE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2098b7a3-a5c3-4180-b722-2fa84cd3e787
                stepCounter: 79e76231-b280-4362-a8fa-68215a84f788
            transform: SUM(SalesAndRevenue.Revenue)
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases:
          SALESANDREVENUE: 79e76231-b280-4362-a8fa-68215a84f788
          ACCOUNTHIERARCHY: ec835fbf-4cc6-4d7f-a0d7-03726a86eb82
          UCCAMPUS: ff8e6c8c-a21d-4105-b135-1e58792d1cdf
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: DIM
            nodeName: UCCAMPUS
          - locationName: FACT
            nodeName: SALESANDREVENUE
          - locationName: DIM
            nodeName: ACCOUNTHIERARCHY
        join:
          joinCondition: |-
            FROM {{ ref('FACT','SALESANDREVENUE') }} SalesAndRevenue
              JOIN {{ ref('DIM','ACCOUNTHIERARCHY') }} AccountHierarchy
                ON SalesAndRevenue.AccountHierarchyKey = AccountHierarchy.AccountHierarchyKey
              JOIN {{ ref('DIM','UCCAMPUS') }} UCCampus
                ON AccountHierarchy.Level1ForceId = UCCampus.OPCampusForceId
             GROUP BY SalesAndRevenue.ContractKey,
                      SalesAndRevenue.TransactionDateKey,
                      SalesAndRevenue.ContractId,
                      UCCampus.UCCampusKey
        name: AGGOPSALESANDREVENUEBYCONTRACT
        noLinkRefs: []
  name: AGGOPSALESANDREVENUEBYCONTRACT
  overrideSQL: false
  schema: ""
  sqlType: Fact
  type: sql
  version: 1
type: Node
