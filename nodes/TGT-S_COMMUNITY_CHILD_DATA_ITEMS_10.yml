fileVersion: 1
id: 0cc768e4-b69e-4baa-9432-679eecbdb350
name: S_COMMUNITY_CHILD_DATA_ITEMS_10
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: ""
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f0214930-42be-4520-8133-3c27ff00b311
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: DATATYPE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: df26d7c0-b3f5-414c-8e8b-82ace707befe
                stepCounter: a0551e43-8b4a-47d3-98bb-4901d2751478
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 95144e18-95b2-4a67-ad27-6be2c8b0ec50
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: VARCHAR(200)
        defaultValue: ""
        description: ""
        name: DATATYPE_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 02901402-d68f-4aad-8cca-2c4f09ce8053
                stepCounter: a0551e43-8b4a-47d3-98bb-4901d2751478
            transform: left(l_mappings_CDSSWE_DataItems.name,200)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: baa3b3d6-e543-4dc3-b84a-55a246480691
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: CHILD_ATOMIC_OBSERVATION_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: aa8f835d-031e-43f0-a473-7d4d43e78c0d
                stepCounter: d1bfbfb3-2dca-4203-8229-98b5c86088ac
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 856db204-3ed9-4a82-bcf4-adfe39a089d6
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: ATOMIC_OBSERVATION_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 4e229fff-bd59-423c-80c0-0c3d869f3997
                stepCounter: d1bfbfb3-2dca-4203-8229-98b5c86088ac
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 430a4b79-a120-402d-bfd2-a7bb0768a67f
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: ROW_INDEX
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b19e68ae-441a-4e27-8184-19abfb2ceff4
                stepCounter: d1bfbfb3-2dca-4203-8229-98b5c86088ac
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a7eeb8a3-c63b-4fa5-bccf-052bd2ab26c5
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: DATE
        defaultValue: ""
        description: ""
        name: DATE_VALUE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d4b1b10a-0250-48f6-a13a-ad23821f781c
                stepCounter: d1bfbfb3-2dca-4203-8229-98b5c86088ac
            transform: TRY_CONVERT(date, NULLIF(ds_cdsswe_child_atomic_observation.value, ''), 103)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 6200be83-f3a8-41f1-b2c4-f735dbfaeb0d
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: VARCHAR(100)
        defaultValue: ""
        description: ""
        name: TEXT_VALUE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d4b1b10a-0250-48f6-a13a-ad23821f781c
                stepCounter: d1bfbfb3-2dca-4203-8229-98b5c86088ac
            transform: LEFT(LTRIM(ds_cdsswe_child_atomic_observation.value), 100)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 327e179a-189c-458b-9710-b13060693970
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: PARENT_DATATYPE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0f8ac50d-4b70-4407-9598-3210aee51fd1
                stepCounter: 75174d9c-78ab-4e2d-b1fc-fa89ec3f8d67
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d49dc6e5-1914-40d1-a3b8-df68f7bc0269
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: DATE
        defaultValue: ""
        description: ""
        name: DATE_COMPLETED
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0dbe6fae-c28a-4f65-ac78-f11e4f0a165f
                stepCounter: 75174d9c-78ab-4e2d-b1fc-fa89ec3f8d67
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0ce59986-b7ea-4e55-900c-3b57caf61764
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: OBSERVATION_REPORT_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2873ec7c-2c60-4c9b-8393-65dd1f9c1075
                stepCounter: 118925c3-58c5-4511-b154-1b1a31b2082e
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3a646cec-a131-4afd-b21f-0425056d0703
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: VARCHAR(1)
        defaultValue: ""
        description: ""
        name: OBSERVATION_REPORT_STATUS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0f2e33ef-8ae5-4e28-9dbc-6e3089022f15
                stepCounter: 118925c3-58c5-4511-b154-1b1a31b2082e
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 32a5b574-7d02-4da9-ad7b-268c810cf8d0
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: FORM_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e2aa316c-f0a1-43d0-a1e8-075c7d5e6307
                stepCounter: 118925c3-58c5-4511-b154-1b1a31b2082e
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 04d19aa0-ecbe-408c-803e-3137fd1c06de
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        name: TASKREQUEST_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0ad789b0-1af1-49e5-b06b-e698b88f786b
                stepCounter: 7b4c3eab-6eaf-440f-890b-2660daed8357
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3936c39b-1fab-452d-a417-9516d619d786
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: TASKTYPE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b815db37-bca6-45b6-b987-92372b9c1d7f
                stepCounter: 7b4c3eab-6eaf-440f-890b-2660daed8357
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 4185ea8e-59ee-4efa-97c9-54233ee38953
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: PARENT_PATIENT_PROGRAMME_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e8c35fc6-d9d7-403d-a8cb-af6293bf60c2
                stepCounter: 2ecdd3a6-b52d-4166-90dd-2155a6b785ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 937a700e-6af6-4fc0-92f6-d8499cbf84ae
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: PATIENT_PROGRAMME_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1dc01ac2-a10c-49ca-90eb-ed32df22cd74
                stepCounter: 2ecdd3a6-b52d-4166-90dd-2155a6b785ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c9f2ae0f-1135-421f-94f0-609bf2a99a4d
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: NUMERIC(18)
        defaultValue: ""
        description: ""
        name: PROGRAMME_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7b91ef87-beb6-45b7-8ae3-d8d41ee24fae
                stepCounter: 2ecdd3a6-b52d-4166-90dd-2155a6b785ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7e8e8313-28d5-4d5c-ba84-4b1d522447ad
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: VARCHAR(30)
        defaultValue: ""
        description: ""
        name: REFERRAL_ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 16991d8f-e34e-4125-9391-9a476bbca229
                stepCounter: 2ecdd3a6-b52d-4166-90dd-2155a6b785ca
            transform: LEFT (ltrim(CASE WHEN LEFT(ds_cdsswe_patient_programme.stream_id,1) = 'H' THEN ds_cdsswe_patient_programme.stream_id ELSE 'R' + ds_cdsswe_patient_programme.stream_id END),30)
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0984ce49-be87-444f-803d-6847a44a9749
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: VARCHAR(10)
        defaultValue: ""
        description: ""
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9bc6297d-00ed-48bb-952b-24c3544e139e
                stepCounter: 289da868-88f5-4e61-a975-de3b30517956
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: af0c37dd-5e2f-4cae-ad2e-1af5a06f4792
          stepCounter: 0cc768e4-b69e-4baa-9432-679eecbdb350
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: L_MAPPINGS_CDSSWE_DATAITEMS
        join:
          joinCondition: |-
            FROM l_mappings_CDSSWE_DataItems
              JOIN ds_cdsswe_child_atomic_observation
                ON l_mappings_CDSSWE_DataItems.datatype_id = ds_cdsswe_child_atomic_observation.child_datatype_id
              JOIN ds_cdsswe_atomic_observation
                ON ds_cdsswe_child_atomic_observation.atomic_observation_id = ds_cdsswe_atomic_observation.atomic_observation_id
              JOIN ds_cdsswe_observation_report
                ON ds_cdsswe_atomic_observation.observation_report_id = ds_cdsswe_observation_report.observation_report_id
              JOIN ds_cdsswe_task_request
                ON ds_cdsswe_observation_report.taskrequest_id = ds_cdsswe_task_request.taskrequest_id
              JOIN ds_cdsswe_patient_programme
                ON ds_cdsswe_task_request.patient_programme_id = ds_cdsswe_patient_programme.patient_programme_id
              JOIN l_cdsswe_patient
                ON ds_cdsswe_patient_programme.patient_id = l_cdsswe_patient.patient_id
             WHERE l_mappings_CDSSWE_DataItems.Build_as_DE_Fact = 1
        name: S_COMMUNITY_CHILD_DATA_ITEMS_10
        noLinkRefs: []
  name: S_COMMUNITY_CHILD_DATA_ITEMS_10
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
