fileVersion: 1
id: 8de59447-ee37-4246-8156-3d0444fc3f24
name: FACT_PATIENT_ADDRESSES
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: "Record of address and history as per iPM"
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8b4c0da9-e3b5-4d3f-9a7d-9adbe88ad39d
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: iPM patient reference no
        name: PATIENT_REFERENCE_NO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f4e8cc7b-a56e-4314-a6a8-e2296a638e5c
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ce4c698a-6c36-4128-b4de-6b3f010b024a
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: iPM Address reference no
        isBusinessKey: true
        name: ADDRESS_REFERENCE_NO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6d548a88-6198-4ac6-bde4-b61eb9590d0f
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 4c2302b3-3d3a-413a-ace7-f5450c45be08
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: iPM address role reference no
        name: ADDRESS_ROLES_REFERENCE_NO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0d2e7694-0e0c-4393-a9bd-02163471cb59
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 94276b52-7b0b-434f-9530-886924d3d615
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_patient_addresses.patient_reference_no=dim_patient.patient_reference_no
        name: DIM_PATIENT_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9962a01b-5f3d-4c1a-b371-997edef38d0f
                stepCounter: d52dd438-7899-4242-9e38-539d2a1447df
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5875477b-bd1c-436e-af52-d9c1a6cfe705
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: Patient National Health Identifier
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 123d4189-946c-476c-a1c6-54d376a54125
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ce34856a-942c-4578-bcc4-1d89e5477fa6
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(50)
        defaultValue: ""
        description: ""
        name: ADDRESS_LINE1
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b60d7ba9-6287-4662-98f4-f850d7c66273
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3494bf28-a092-4bb4-8479-eeb0cf94b1a9
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(50)
        defaultValue: ""
        description: ""
        name: ADDRESS_LINE2
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fcee091e-2c42-45d7-ba1f-f31a778977fb
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 309f5c31-699b-436b-b786-702206a2ca59
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(50)
        defaultValue: ""
        description: ""
        name: ADDRESS_LINE3
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 32b01177-e5d3-430d-beda-a8dd5521127b
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5d365954-2f84-48b5-9b84-eb6989ede7c8
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(50)
        defaultValue: ""
        description: ""
        name: ADDRESS_LINE4
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8e7ea5ef-1ada-478c-8e2b-556ded6efa90
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7b7d2d28-761a-4405-98a9-da7be4b952c1
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(10)
        defaultValue: ""
        description: ""
        name: POST_CODE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d08909a2-e679-401b-b05b-40c36a017d5d
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9877fc84-4c16-46d7-a929-1800c69520bd
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(255)
        defaultValue: ""
        description: full concatenated address
        name: FULL_ADDRESS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 10204b65-147a-4f39-84a6-b3033e2237cb
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c9f48700-1d89-4740-820b-2b9007086122
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: CHAR(1)
        defaultValue: ""
        description: Y/N for home postal address from IPM.  This is the main address used
        name: HOME_POSTAL_ADDRESS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e97bbdbc-ae5f-426e-b20f-bf4f0e603c6a
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 660680f7-8788-4031-95b2-62184015a933
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: CHAR(1)
        defaultValue: ""
        description: has the email been validated by intelectia
        name: EMAIL_VALIDATED
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fb1ed9d6-3850-41e4-a795-bc40699e6b8a
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e58b91b5-9c18-4a45-b3a3-79950b462821
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_patient_addresses.health_district_code=dim_domicile.domicile_code
        name: DIM_DOMICILE_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 4e049fc8-a2a3-4bad-9b91-11b9d158b35e
                stepCounter: 330ad0aa-b8b1-4da9-ab37-b4fe8f889452
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: dd1de197-051b-45f2-9888-7359482e9f20
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_patient_addresses.address_role_code=dim_patient_address_types.address_role_code  s_patient_addresses.address_type_code=dim_patient_address_types.address_type_code
        name: DIM_PATIENT_ADDRESS_TYPES_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 345b847c-60ac-489e-80a3-559ed166352c
                stepCounter: 253c135f-3cdd-4312-a8be-5004338d594b
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 98977e42-ab0a-4d80-9478-030a0e9c0b44
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: iPM Address start date
        name: ADDRESS_VALIDITY_START_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8b4636a1-227b-4326-ac32-c6fab1898a9c
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 56e036f2-c647-4cd3-8f6f-5bf6f4fdd7e1
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: iPM Address end date
        name: ADDRESS_VALIDITY_END_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7ba3489c-b83e-4aa5-942c-f95e95181e79
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 29158af2-152c-418c-9f4e-0b26e6f777c7
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: 'row number identifying superseded addresses for a patient '
        name: ADDRESS_ROW_NUM
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f7d7e4ed-3764-4fb7-8bd6-f8a0a59a0c4f
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7cc510cf-4f2c-4cbc-8d09-5b9896892d32
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: A non 0 value represents as address reference which is another address of the same type valid for part of this addresses date range
        name: ADDRESS_DUPLICATE_REFERENCE_NO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d9c9e88e-fe45-421b-b1f6-ef98d87f602d
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 75cfe659-5684-4cf1-909e-a0f1218c0654
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: VARCHAR(7)
        defaultValue: ""
        description: ""
        name: MESHBLOCK
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1feba94c-f186-4e70-8a3a-de127a83a4df
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d6c79fa0-d7a6-4c6a-a926-3acef5ce2ce4
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DECIMAL(12,6)
        defaultValue: ""
        description: ""
        name: NZ_GD2K_XCOORD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 701b4bf3-9e9b-487e-96aa-5b6929da964c
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 26642a75-7ce1-4972-a886-872c5af95297
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DECIMAL(12,6)
        defaultValue: ""
        description: ""
        name: NZ_GD2K_YCOORD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 155aed83-852a-4c5f-9a77-24c2527fb78a
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: fb9b3ee8-ba3b-4541-9481-163213ca104d
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DECIMAL(12,3)
        defaultValue: ""
        description: ""
        name: NZ_MG_XCOORD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: dcc9210d-0d46-4e3d-a7c1-3a80a7a2e5f9
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 50c7eb8c-98ee-41d5-82d0-2c3a7ea5fdb0
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DECIMAL(12,3)
        defaultValue: ""
        description: ""
        name: NZ_MG_YCOORD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8e13e43a-30df-49b2-a012-f620dd91c739
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ababe88a-8d8e-4452-b922-3510f4085d1d
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DECIMAL(12,3)
        defaultValue: ""
        description: ""
        name: NZ_TM_XCOORD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 183246a3-de68-4716-b404-7de1be21f62c
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a56de06d-9c82-464c-86d5-822d30636544
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: Generated artificial key
        name: DIM_MESH_BLOCKS_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1fdd240c-d807-48d9-9238-8c77bb1f9977
                stepCounter: b4916c1c-22ab-49f9-84b3-f35bdd65bb51
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d22b18fc-ff90-46f3-be79-fe1e5354b600
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_patient_addresses.user_modif=dim_modify_user_login.modify_user_login_code
        name: DIM_MODIFY_USER_LOGIN_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ceaa34a6-dd0b-40fb-bc61-9df93cc05e7b
                stepCounter: bef0768d-dddb-4d02-af8d-03160de42b62
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 861f61f8-3c77-4317-8ae4-2be145bebd75
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_patient_addresses.user_create=dim_create_user_login.create_user_login_code
        name: DIM_CREATE_USER_LOGIN_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2dfe5e14-cc2f-4748-8352-a6d1621289af
                stepCounter: 70bd6ed5-e21b-440f-9079-7fe305bc4f30
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 6c11a98c-78c4-4f41-acfe-4369a3ba067b
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DECIMAL(12,3)
        defaultValue: ""
        description: ""
        name: NZ_TM_YCOORD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 02e4623c-b62c-4d6e-8b67-19acdcd8716c
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ba20bc57-654b-4bcc-845b-6263888e8767
          stepCounter: 8de59447-ee37-4246-8156-3d0444fc3f24
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fd8e393d-469c-4a5b-a72c-1d5bb7dbf63c
                stepCounter: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases:
          S_PATIENT_ADDRESSES: 71247b66-335b-4dc5-9eb0-5fe1c61c2a26
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_PATIENT_ADDRESSES
        join:
          joinCondition: |-
            FROM {{ ref('TGT','S_PATIENT_ADDRESSES') }} s_patient_addresses
             WHERE address_row_num = 1
        name: FACT_PATIENT_ADDRESSES
        noLinkRefs: []
  name: FACT_PATIENT_ADDRESSES
  overrideSQL: false
  schema: ""
  sqlType: Fact
  type: sql
  version: 1
type: Node
