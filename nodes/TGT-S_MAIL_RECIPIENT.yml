fileVersion: 1
id: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
name: S_MAIL_RECIPIENT
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: "Permanent Stage Table pre-loaded with names for emailing Job Notifications.    NOTE: \"Rebuild\" procedure and Edit \"From\" clause change Names in the Mailing List.  NOTE: Truncate Table manually before Reloading/Refreshing all data, to avoid duplication."
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 63de28bf-2400-4555-b048-d0fcf0d131d1
          stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
        config: {}
        dataType: VARCHAR(60)
        defaultValue: ""
        description: recipient_name
        name: RECIPIENT_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 63de28bf-2400-4555-b048-d0fcf0d131d1
                stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c1a50fbe-5cdf-4538-bea4-5318b9f3d77a
          stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
        config: {}
        dataType: VARCHAR(60)
        defaultValue: ""
        description: recipient_role
        name: RECIPIENT_ROLE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c1a50fbe-5cdf-4538-bea4-5318b9f3d77a
                stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 854b928a-54a8-4765-b777-37a477d5d8a4
          stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
        config: {}
        dataType: VARCHAR(60)
        defaultValue: ""
        description: recipient_email
        name: RECIPIENT_EMAIL
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 854b928a-54a8-4765-b777-37a477d5d8a4
                stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e5d98132-ef95-464c-98f0-e3e151d09551
          stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
        config: {}
        dataType: CHAR(1)
        defaultValue: ""
        description: notification_flag
        name: NOTIFICATION_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e5d98132-ef95-464c-98f0-e3e151d09551
                stepCounter: e64b4df9-d23c-48a0-a334-5e37d02ecb1e
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_MAIL_RECIPIENT
        join:
          joinCondition: |-
            FROM (
                    SELECT recipient_name,
                           recipient_role,
                           recipient_email,
                           notification_flag
                      FROM (VALUES ('Roger,Richard', 'DB RED Administrator', 'Richard.Roger@waitematadhb.govt.nz', 'Y'), ('Jack,Fraser', 'DB RED Administrator', 'Fraser.Jack@waitematadhb.govt.nz', 'N'), ('Southen,Chris', 'DB RED Manager', 'Chris.Southen@waitematadhb.govt.nz', 'N'), ('Finance-BI', 'Finance BI User', '#WDHBFinanceBIUsersWDHB@@waitematadhb.govt.nz', 'N')) AS s_mail_recipient (recipient_name, recipient_role, recipient_email, notification_flag)
                   ) s_mail_recipient
        name: S_MAIL_RECIPIENT
        noLinkRefs: []
  name: S_MAIL_RECIPIENT
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
