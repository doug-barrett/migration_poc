fileVersion: 1
id: f1a9a43a-8486-4eb1-9556-9ab04d1cf18f
name: S_PIMS_PATIENT_DELETED
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: "Contains ptnt_refno values in ds_pims_patients that are not in l_pims_patient_refno.  Custom procedure will update ds_pims_patients.dss_deleted_flag to 1."
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8ddf5ae3-2719-49d0-8877-6efd87377322
          stepCounter: f1a9a43a-8486-4eb1-9556-9ab04d1cf18f
        config: {}
        dataType: DECIMAL(10)
        defaultValue: ""
        description: ""
        name: PATNT_REFNO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5c1d681d-fba6-4c9e-bfdf-cc4bbe97e046
                stepCounter: 34c6fd4e-f463-4453-bad1-3a1d762d3caa
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d841c433-ff39-4879-8b72-c4bce5bd7c93
          stepCounter: f1a9a43a-8486-4eb1-9556-9ab04d1cf18f
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Column added so that l_pims_patient_refno show as a source table in meta data.
        name: DSS_DELETED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: "0"
                stepCounter: "0"
            transform: '1'
      - appliedColumnTests: {}
        columnReference:
          columnCounter: be2e38db-4136-4d8b-a4a6-ae1b306956cb
          stepCounter: f1a9a43a-8486-4eb1-9556-9ab04d1cf18f
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: DS_PIMS_PATIENTS
        join:
          joinCondition: |-
            FROM (
                    SELECT patnt_refno
                      FROM ds_pims_patients
                    EXCEPT SELECT patnt_refno
                      FROM l_pims_patient_refno
                   ) ds_pims_patients
        name: S_PIMS_PATIENT_DELETED
        noLinkRefs: []
  name: S_PIMS_PATIENT_DELETED
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
