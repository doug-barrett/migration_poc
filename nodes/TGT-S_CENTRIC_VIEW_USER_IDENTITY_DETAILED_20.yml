fileVersion: 1
id: 5a1846f9-fb16-400b-8cc3-1eeef9dcb3cd
name: S_CENTRIC_VIEW_USER_IDENTITY_DETAILED_20
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: ""
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9dbaf378-f15c-4eb2-91b5-a9c6284fecf4
          stepCounter: 5a1846f9-fb16-400b-8cc3-1eeef9dcb3cd
        config: {}
        dataType: VARCHAR(128)
        defaultValue: ""
        description: s_centric_view_user_identity_detailed_10.user_name=dim_first_seenby_clinician.user_name
        name: USERNAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 986a5ffc-3865-4725-b46e-c9d51e8deae9
                stepCounter: a283a327-cea8-40b2-8acb-19c561fb29da
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 46329fd2-4f60-44b0-ab64-c9ef2cf541ac
          stepCounter: 5a1846f9-fb16-400b-8cc3-1eeef9dcb3cd
        config: {}
        dataType: NVARCHAR(255)
        defaultValue: ""
        description: s_centric_view_user_identity_detailed_10.user_name=dim_first_seenby_clinician.user_name
        name: SMT_FINALISE_USER_ROLE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0cf11146-6efc-4f83-80aa-3f445867f991
                stepCounter: a283a327-cea8-40b2-8acb-19c561fb29da
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 41b1bf16-5aba-4fe5-8464-6c4ac0835928
          stepCounter: 5a1846f9-fb16-400b-8cc3-1eeef9dcb3cd
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_CENTRIC_VIEW_USER_IDENTITY_DETAILED_10
        join:
          joinCondition: |-
            FROM ( SELECT username,
                   role_name --'centric' source_namespace    from s_centric_view_user_identity_detailed_10  where 1=1  --and username ='PonePuP'    and username is not NULL   group by username,role_name  except        select user_name username,smt_finalise_user_role role_name    --,validity_start_date,validity_end_date    from [dim].[dim_centric_first_seenby_clinician]    where 1=1   -- and user_name = 'PonePuP'    and validity_end_date > getdate()    ) s_centric_view_user_identity_detailed_10
        name: S_CENTRIC_VIEW_USER_IDENTITY_DETAILED_20
        noLinkRefs: []
  name: S_CENTRIC_VIEW_USER_IDENTITY_DETAILED_20
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
