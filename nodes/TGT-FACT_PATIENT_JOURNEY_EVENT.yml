fileVersion: 1
id: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
name: FACT_PATIENT_JOURNEY_EVENT
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: ""
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 363b702a-1313-49db-8535-c4f345ac14c2
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: Unique ID for a patient journey
        name: JOURNEY_ID
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7f7dd4ca-4b72-4471-8e15-dd1ec0a54c3c
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 606da798-148f-4400-870e-9a5799bf279a
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: Patient National Health Index (NMPI)
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e7f60003-b7a5-4f17-92d1-b8cb3e8fce89
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: b2490771-3d03-4803-af00-80406e519a4a
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Journey number for the patient.
        name: JOURNEY_NUM
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e8017333-8bf1-48d8-ae28-60f8be1ba8fd
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ce76cb42-50b5-47ca-b361-41ead2ede09f
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Journey number for the patient.
        name: JOURNEY_COUNT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b0775c8c-9cc2-40f1-8a6c-8be2c5647a1d
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 490ea325-e0eb-4fa0-a5b3-72b46275b627
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Total number of events for each journey.
        name: JOURNEY_EVENT_COUNT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5940244a-9550-42c3-8908-6f660639a08a
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f15b6434-87f9-4773-bb0a-4b8f5df90ba2
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Numbers events for each journey in event_start_date order.
        name: JOURNEY_EVENT_SEQ_NUM
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9671d233-5762-4116-a6bb-c7f160377e16
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 372aabb4-ee01-4aab-a8f6-1ea3b60bfa0d
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: Source for this event e.g. ED, Inpatient.
        name: EVENT_SOURCE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 324c2ba3-ce1f-45c3-8896-4534d1b9573a
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 359df9c7-2583-4bfa-b98c-8d485358e697
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: encounter unique identifier
        name: ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 574b9ff8-3604-4f73-b718-1ec758c0ff18
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 84687914-4c0b-4f93-96b5-b6ee8b87a914
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Event start date and time e.g. admit time.
        name: EVENT_START_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2621ef5d-f448-424a-98e0-cef8cd8fba05
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a2276b03-5761-4342-b9ec-a09e227efbc2
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time when the event ended e.g. discharge time.
        name: EVENT_END_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b4deb8dd-0a39-4fae-ab24-ca122be93cbf
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: b903f622-f329-41ed-8da0-0c648081af90
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: ""
        name: REFERRAL_ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 41bb7655-5165-40d7-b00d-a94846fecd75
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e5a55199-77e4-4029-bdb7-38fe481897c1
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the first ED event for the journey.
        name: FIRST_ED_EVENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 67c2e441-869a-4f18-b1fc-b53ee90f0ab6
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 534d5713-985e-4f70-b66d-0ee6ef9baa38
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the first inpatient event for the journey.
        name: FIRST_IP_EVENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 07df19f2-f45b-4b9a-89ac-a99ab0ad1e6f
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 2f703f12-2a32-4a39-ba94-322283c59751
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the ED event related to the index IP event.
        name: INDEX_ED_EVENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 01c7a96e-cda4-4849-80cf-dc44e6fd98f3
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7d8839e6-b954-4a35-95c8-fbad04a87bb1
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: 'If set to 1 indicates the IP event classified as the Index event. Will be the first IP event which does not end in ED i.e. discharge ward is not ECC or ECCW.  '
        name: INDEX_IP_EVENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d1b06fc9-97c9-4b0a-97eb-dde5664d4c53
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: beb19104-ada7-4914-808a-70862585ec42
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the first theatre event for the journey.
        name: FIRST_THEATRE_EVENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e7d2ae5d-175b-4e77-a370-a998d0d6531e
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f427d87c-89ee-4847-b13e-73806b8909b6
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the first unplanned theatre return event for the journey.
        name: UNPLANNED_THEATRE_RETURN_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6b8795e9-486d-4794-a196-0df0b4209ef7
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ac4de2f4-c273-46e1-ade6-37090c8ab7fd
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: THEATRE_CANCELLED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ff723c5c-ee49-4448-8a7d-0e6371756083
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8c30e910-5444-4461-9cbb-051f1d9d879b
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is an acute readmission within 28 days of the previous IP event.
        name: ACUTE_READMIT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 272ab363-2d6f-4dfb-96c2-1b430c00e7c9
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: db555d16-c67c-43c2-9887-569e5c218c9c
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Flag indicating whether this is a rehab event i.e. discharge specialty = AT&R.
        name: REHAB_EVENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 3d474be8-e3a9-48d3-83c8-478e2cc27aff
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c5b94be5-9271-430e-a836-43c47ce43ed5
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the first specialist outpatient appointment for the journey.
        name: FSA_OUTPATIENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c1be732b-6ee8-4d4d-a509-5cd3a1752a3b
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 8e0818a5-1264-412e-846c-00f684317f6d
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if this is the first outpatient follow up appointment for the journey.
        name: FIRST_FUP_OUTPATIENT_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 4c1317de-eb28-4bcb-b81c-d9916ccabfd0
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 98c8e9af-8114-465a-b78d-39309199f98d
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if the event has been clinically coded to a DRG.
        name: CODED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0e0f05a1-613b-4e6f-ae79-aa6cf063c7aa
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0000b733-d9ef-47ae-8729-f5d1cd8d98d2
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: General counter always set to 1.
        name: EVENT_COUNT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: a233c4e9-bd46-4589-a696-ecb02fd2027e
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 92d9e479-5e27-4523-acbc-608f3ee7342b
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_in_patient_event_30.admission_specialty_reference_no=dim_admission_specialty.admission_specialty_reference_no
        name: DIM_ADMISSION_SPECIALTY_KEY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ab8ba93d-594b-4783-9315-7591160e1e8c
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9f8808c5-6574-4641-98ab-4b9a0e4b6c27
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_in_patient_event_30.admission_ward_reference_no=dim_admission_ward.admission_ward_reference_no
        name: DIM_ADMISSION_WARD_KEY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 56566a98-b35b-422f-a660-2e17f2239285
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f2732e93-ebe1-49ad-aa8a-ea4ed3bffa86
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_in_patient_event_30.discharge_specialty_reference_no=dim_discharge_specialty.discharge_specialty_reference_no
        name: DIM_DISCHARGE_SPECIALTY_KEY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e7e8c2df-ff25-44f0-8eb7-7ecbaded5dc6
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 106a7612-8467-429f-8325-0892bdb8f927
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_in_patient_event_30.discharge_ward_reference_no=dim_discharge_ward.discharge_ward_reference_no
        name: DIM_DISCHARGE_WARD_KEY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ad71b81c-2003-49ca-b41b-89455a7b0de5
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: cf56e619-7070-49f7-8b67-644d7439e57d
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_in_patient_event_30.DRG_code=dim_DRG_code.DRG_code  s_in_patient_event_30.CONVERT(varchar(4),dim_discharge_date.discharge_fin_year)=dim_DRG_code.financial_year
        name: DIM_DRG_CODE_KEY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fe8c5a0a-6d82-4902-88e2-9496e31c1202
                stepCounter: 025cc51b-16d6-4445-83f7-5229e679b705
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c3bf8cef-c570-4233-bb12-bfc13467e3a4
          stepCounter: 2d857746-00dd-408e-a8e4-cb34cf0a4fb7
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases:
          S_PJ_EVENT: 025cc51b-16d6-4445-83f7-5229e679b705
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_PJ_EVENT
        join:
          joinCondition: FROM {{ ref('TGT','S_PJ_EVENT') }}
        name: FACT_PATIENT_JOURNEY_EVENT
        noLinkRefs: []
  name: FACT_PATIENT_JOURNEY_EVENT
  overrideSQL: false
  schema: ""
  sqlType: Fact
  type: sql
  version: 1
type: Node
