fileVersion: 1
id: 255a8bc5-5383-4153-a4c1-d791d6c02c10
name: FACT_THEATRE_BOOKING
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
  database: ""
  deployEnabled: true
  description: ""
  isMultisource: false
  locationName: TGT
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 69a93598-b5c1-45f7-a7cb-d44bd521a0cc
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INT
        defaultValue: ""
        description: ""
        isBusinessKey: true
        name: BOOKING_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c59726e2-7818-409e-a848-602b1694275e
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: bd434840-6907-423f-9ce7-993630eb62fa
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: ""
        name: PATIENT_NHI
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6f58d32c-2109-40b4-94fd-b17ca733c7af
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c88fa527-1ae2-415a-b25a-746be87b74c3
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INT
        defaultValue: ""
        description: Sequence number for the bookings of a patient.
        name: PATIENT_BOOKING_NUM
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 32ab9c6c-8565-45bb-9256-82acdfbd8e9e
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1ad4b852-d82d-4181-a58f-3b5b00dc07a3
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(30)
        defaultValue: ""
        description: ""
        name: BOOKING_ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c1e88bd2-f67a-4ed4-8ec4-63426d787a99
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 10243658-8343-4114-9e9f-8311970ce629
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(20)
        defaultValue: ""
        description: ""
        name: IP_EVENT_ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 0f279e11-01f9-41d2-a1ac-000184a5713a
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9a30cced-9931-4ace-bbb3-742000a9e824
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(12)
        defaultValue: ""
        description: 'The next acute theatre visit for the patient - either for the same specialty or occurring in the next 10 days if no such visit exists.  '
        name: THEATRE_VISIT_ENCOUNTER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 52580ff9-393a-4b13-93ea-86cfc1e25eb9
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: cc307d76-c605-44f2-9551-81b81ae235d0
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: BOOKING_SENT_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b8367204-58e0-4ef6-ba10-13cec0c6b174
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 05848b35-205a-4d4e-9f56-0bc44df03b0c
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: 'Set to either the Adjusted Theatre Time (if a value is entered and it can be converted to minutes) or the Current Average Theatre Time.  '
        name: BOOKED_THEATRE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5dc53f85-abae-4bac-88d2-261a799ca578
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5030c7e1-4b75-43dc-b6c5-c7f368aa6da6
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: SMALLINT
        defaultValue: ""
        description: Current average theatre time loaded from HES.
        name: CURRENT_AVERAGE_THEATRE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 28f7e618-073d-4add-9513-b820dde8dbc5
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: a4bec2b1-bd2e-40c5-9eda-b8b85574c80b
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: Set to 1 if an adjusted booking time was entered and is different to the Curent Average Theatre Time.
        name: BOOKING_TIME_ADJUSTED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 00a0f685-8e2b-4305-a596-1efa384207bb
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 433f3561-7db2-452e-9061-2a1ec6775dce
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: ACUTE_BOOKING_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 08dfb4e9-4d1e-4f39-b2e4-204e68986412
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 56d94ff8-c02c-4597-90da-7217ea418661
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: CONSENT_SIGNED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2713a523-e0e7-4082-8a09-55f486021e9f
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 342146f7-bdfe-47f5-bc6f-b03d1ff8dac0
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: INTERPRETER_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d8a48c00-fc07-4919-8a80-370188fd4b71
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 536d17c8-49c7-4d23-af91-9bb48008e288
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: THEATRE_COORD_CONTACTED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6d0f25cc-7cd3-4187-b0c5-9eb03bb57cc7
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9d155d14-f450-4aba-8a22-bf197602c915
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: ""
        name: ANAESTHETIST_CONTACTED_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e2e22e13-8a44-4d64-858e-bc253e622d15
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5fa8815f-ddef-41dc-89dc-be0016e7bef4
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(100)
        defaultValue: ""
        description: ""
        name: LAST_FLUID_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: be4066da-f853-4e8a-8aba-66142f6b66b6
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 46d1d9d6-4387-4e75-a4c4-e61baed5030d
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(100)
        defaultValue: ""
        description: ""
        name: LAST_FLUID_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 56e8a684-df97-4c10-8167-b70760aadd6d
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: b69e38ec-5476-4031-84e0-370ac8449531
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: LAST_FLUID_DATETIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1d0e83ca-66a1-4fdb-8f97-6f43e3bf23aa
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5d93bd2b-80a2-4b86-a018-1103432564b6
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(100)
        defaultValue: ""
        description: ""
        name: LAST_ATE_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 01cad63a-22c5-4b8b-ad28-e44412765829
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 563c6169-a58e-48b4-826e-dc529c6bf4f8
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: VARCHAR(100)
        defaultValue: ""
        description: ""
        name: LAST_ATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 026b7cf5-417f-4439-920d-7f14d4908e19
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d2d41f2e-cd57-413b-a843-d78cf3ff1e06
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: ""
        name: LAST_ATE_DATETIME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f7038a9d-0c4d-472f-b697-d8bfe9a069c6
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 998cf002-7249-4b3d-b1ef-e81c60d16192
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: TINYINT
        defaultValue: ""
        description: General counter always set to 1.
        name: BOOKING_COUNT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e8f6a895-c69b-4e40-b4a1-165835e834f8
                stepCounter: 3a909932-16c1-4ef4-a6e9-3510c65781ca
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e3ef17e2-e1bc-4084-b7b7-92cd81722955
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_theatre_booking.booking_sent_date=dim_booking_date.booking_date
        name: DIM_BOOKING_DATE_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 3f5e2b66-caa0-422b-a711-15a7a76b2288
                stepCounter: b4c2e4bb-aa41-420b-9135-492874ce3872
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7a304a2e-cf06-4fcc-99ad-fbd6f6f710f2
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_theatre_booking.booking_id=dim_theatre_booking.booking_id
        name: DIM_THEATRE_BOOKING_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e8f626cc-1c3a-47ea-a43e-baf512754bb1
                stepCounter: 8a0f4770-2531-4823-a314-1f7db24f325c
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1a591118-652a-4989-a418-f745a4035598
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_theatre_booking.booking_specialty=dim_theatre_booking_procedure.booking_specialty  s_theatre_booking.booking_procedure=dim_theatre_booking_procedure.booking_procedure
        name: DIM_THEATRE_BOOKING_PROCEDURE_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 8dd1ba89-158e-425c-8500-b6d7fbdce66f
                stepCounter: e2bedfb6-4e4a-4772-b218-923451ca6cfc
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: ba210930-b0a0-4500-b440-35d42f73992d
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_theatre_booking.booking_status_code=dim_theatre_booking_status.booking_status_code
        name: DIM_THEATRE_BOOKING_STATUS_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5fe85580-0af4-4dbb-b563-15b8889c1a3f
                stepCounter: 009a1d58-bbf3-4029-85a6-f9254e5e29a8
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d059e084-5dd6-46bd-ba67-6fc46bbf5b7f
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: s_theatre_booking.patient_reference_no=dim_patient.patient_reference_no
        name: DIM_PATIENT_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9962a01b-5f3d-4c1a-b371-997edef38d0f
                stepCounter: d52dd438-7899-4242-9e38-539d2a1447df
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: be5b1442-eeeb-42eb-863b-9dfb939f6dfb
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: INTEGER
        defaultValue: ""
        description: Generated artificial key
        name: DIM_SPECIALTY_KEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 79aee918-ff6f-4b0a-a656-000827899f3e
                stepCounter: 4182a75e-d07b-4637-97fa-4c01e2878360
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f16a6e7d-44c7-4665-b470-61ec99f68b1c
          stepCounter: 255a8bc5-5383-4153-a4c1-d791d6c02c10
        config: {}
        dataType: DATETIME
        defaultValue: ""
        description: Date and time the row was updated in the data warehouse.
        isSystemUpdateDate: true
        name: DSS_UPDATE_TIME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases:
          S_THEATRE_BOOKING: 3a909932-16c1-4ef4-a6e9-3510c65781ca
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: TGT
            nodeName: S_THEATRE_BOOKING
        join:
          joinCondition: FROM {{ ref('TGT','S_THEATRE_BOOKING') }}
        name: FACT_THEATRE_BOOKING
        noLinkRefs: []
  name: FACT_THEATRE_BOOKING
  overrideSQL: false
  schema: ""
  sqlType: Fact
  type: sql
  version: 1
type: Node
